/*C5*/SET SCHEMA PUBLIC
alter table Allergies_Participant drop constraint FK_r5vwu0bciu3vw81tistdbbo23
alter table Allergies_Participant drop constraint FK_1ysv3tdpa2mmt6dwimeg0lq9f
alter table Participant drop constraint FK_3x9hkcgokvr4671cxnv9l7ej4
alter table Preferences_Participant drop constraint FK_lq5af0c21pq5inf713nc1ardn
alter table Preferences_Participant drop constraint FK_7pthc8x420sidvl7likksx8cs
alter table Reunion drop constraint FK_crpu84u1ew62ejlxg0vwiskkp
alter table Reunion drop constraint FK_tb3aely09goj5nv9h3x0d0e9f
alter table Reunion_Participant drop constraint FK_n2cfiarowebsdtkash8s4pk8j
alter table Reunion_Participant drop constraint FK_c0qyld8dd7y2omgryyaw9e4l3
alter table Reunion_Participant drop constraint FK_ljbj2hnsw6kasecx82eayift2
alter table Reunion_Participant drop constraint FK_2pb98bw85sn21ct4qn3rl1on2
alter table Sondage drop constraint FK_tk9h6ymo8l33djk671qmt6p77
alter table Sondage drop constraint FK_5336l0pgesvo6rhostwhtac68
drop table Allergies if exists
drop table Allergies_Participant if exists
drop table Mail if exists
drop table Participant if exists
drop table Preferences if exists
drop table Preferences_Participant if exists
drop table Reunion if exists
drop table Reunion_Participant if exists
drop table Sondage if exists
create table Allergies (id bigint generated by default as identity (start with 1), libelle varchar(255), primary key (id))
create table Allergies_Participant (allergies_id bigint not null, participant_email varchar(255) not null, primary key (allergies_id, participant_email))
create table Mail (id bigint generated by default as identity (start with 1), code varchar(255), lienPad varchar(255), lienPause varchar(255), primary key (id))
create table Participant (email varchar(255) not null, nom varchar(255), prenom varchar(255), mail_id bigint, primary key (email))
create table Preferences (id bigint generated by default as identity (start with 1), libelle varchar(255), primary key (id))
create table Preferences_Participant (preferences_id bigint not null, participant_email varchar(255) not null, primary key (preferences_id, participant_email))
create table Reunion (id integer generated by default as identity (start with 1), date timestamp, intitule varchar(255), resume varchar(255), mail_id bigint, sondage_id integer, primary key (id))
create table Reunion_Participant (Reunion_id integer not null, peigneCuls_email varchar(255) not null, participants_email varchar(255) not null, invites_email varchar(255) not null, primary key (Reunion_id, invites_email))
create table Sondage (id integer generated by default as identity (start with 1), lienWeb varchar(255), createur_email varchar(255), reunion_id integer, primary key (id))
alter table Allergies_Participant add constraint FK_r5vwu0bciu3vw81tistdbbo23 foreign key (participant_email) references Participant
alter table Allergies_Participant add constraint FK_1ysv3tdpa2mmt6dwimeg0lq9f foreign key (allergies_id) references Allergies
alter table Participant add constraint FK_3x9hkcgokvr4671cxnv9l7ej4 foreign key (mail_id) references Mail
alter table Preferences_Participant add constraint FK_lq5af0c21pq5inf713nc1ardn foreign key (participant_email) references Participant
alter table Preferences_Participant add constraint FK_7pthc8x420sidvl7likksx8cs foreign key (preferences_id) references Preferences
alter table Reunion add constraint FK_crpu84u1ew62ejlxg0vwiskkp foreign key (mail_id) references Mail
alter table Reunion add constraint FK_tb3aely09goj5nv9h3x0d0e9f foreign key (sondage_id) references Sondage
alter table Reunion_Participant add constraint FK_n2cfiarowebsdtkash8s4pk8j foreign key (peigneCuls_email) references Participant
alter table Reunion_Participant add constraint FK_c0qyld8dd7y2omgryyaw9e4l3 foreign key (Reunion_id) references Reunion
alter table Reunion_Participant add constraint FK_ljbj2hnsw6kasecx82eayift2 foreign key (participants_email) references Participant
alter table Reunion_Participant add constraint FK_2pb98bw85sn21ct4qn3rl1on2 foreign key (invites_email) references Participant
alter table Sondage add constraint FK_tk9h6ymo8l33djk671qmt6p77 foreign key (createur_email) references Participant
alter table Sondage add constraint FK_5336l0pgesvo6rhostwhtac68 foreign key (reunion_id) references Reunion
INSERT INTO MAIL VALUES(1,NULL,NULL,NULL)
INSERT INTO PARTICIPANT VALUES('elise.chapon@gmail.com','Chap','on',1)
INSERT INTO MAIL VALUES(2,NULL,NULL,NULL)
INSERT INTO PARTICIPANT VALUES('grossesalope@connasse.com','Nan','ou',2)
INSERT INTO MAIL VALUES(3,NULL,NULL,NULL)
INSERT INTO PARTICIPANT VALUES('florentlaquiche@bn.com','Quiche','Florent',3)
COMMIT
